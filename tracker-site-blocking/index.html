<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Option blocked request loaded via fetch</title>

  <script src="./../tracker-reporting/utils.js"></script>
  <script>
// eslint-disable-next-line no-unused-vars
function init () {
    callAfterDelay(loadTracker);
}

function loadTracker () {
    const targetElement = document.getElementById('target-div');
    fetch('https://www.publisher-company.site/shared/utils.mjs', { mode: 'no-cors' })
        .then(resp => {
            targetElement.innerText = 'RESULT: Tracker loaded';
        })
        // eslint-disable-next-line node/handle-callback-err
        .catch(err => {
            targetElement.innerText = 'RESULT: Tracker not loaded';
        });
}
  </script>

</head>
<body onload="init()">
<p><a href="../index.html">[Home]</a></p>

<p>This will test conditional tracker blocking per site (option blocking). Clicking the buttons below will open bad.third-party.site (Site A) or first-party.site (Site B).</p>
<p>The test tracker should be blocked on Site A, but not on Site B</p>

<ul>
    <li><button type="button" onclick="window.open('https://bad.third-party.site/tracker-site-blocking/index.html', '_')">Open Site A</button></li>
    <li><button type="button" onclick="window.open('https://www.first-party.site/tracker-site-blocking/index.html', '_')">Open Site B</button></li>
</ul>

<div id="target-div">
</div>

</body>
</html>
