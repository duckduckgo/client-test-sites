<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Navigator Namespace</title>
</head>
<body>
<p><a href="../index.html">[Home]</a></p>

<p>The new DOM API <code>navigator.ddg</code> is used to provide signals about the presence of DDG products</p>
<p>This test will try to detect <code>navigator.ddg</code> within a second of the page loading</p>

<p id="namespace"></p>
<p id="extension"></p>

<script>
    function test () {
        const hasNamespace = 'ddg' in navigator;
        let isExtension = false;

        if (hasNamespace) {
            if (typeof navigator.ddg.isExtension === 'function') {
                isExtension = navigator.ddg.isExtension();
            }
        }

        return {
            page: 'navigator-namespace',
            date: (new Date()).toUTCString(),
            results: [
                { id: 'namespace', value: hasNamespace },
                { id: 'extension', value: isExtension }
            ]
        };
    }

    function display (results) {
        for (const result of results) {
            document.getElementById(result.id).textContent = `DDG ${result.id}: ${result.value}`;
        }
    }

    let count = 0;
    const int = setInterval(() => {
        const results = test();
        if (results.results[0].value === true || count >= 10) {
            clearInterval(int);
            display(results.results);
            window.results = results;
        }
        count += 1;
    }, 100);
</script>

</body>
</html>
