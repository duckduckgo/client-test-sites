<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Password update flows</title>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>

<p><a href="../index.html#autofill">[Home]</a></p>

<div class="dialog">
  <form action="/change-password" id="change">
    <h2>Change password (with hidden username field)</h2>
    <fieldset>
      <input id="email" type="hidden" value="test@test.com">
      <label for="password-current">Current Password</label>
      <input id="password-current" name="password-current" type="password" autocomplete="current-password">
      <label for="password-new">New Password</label>
      <input id="password-new" name="password-new" type="password" autocomplete="new-password">
      <label for="password-new-confirm">Confirm Password</label>
      <input id="password-new-confirm" name="password-new-confirm" type="password" autocomplete="new-password">
      <button type="submit">Change password</button>
    </fieldset>
  </form>
  <hr />
  <form action="/change-password" id="change-no-user">
    <h2>Change password (without username)</h2>
    <fieldset>
      <label for="password-current-no-user">Current Password</label>
      <input id="password-current-no-user" name="password-current" type="password" autocomplete="current-password">
      <label for="password-new-no-user">New Password</label>
      <input id="password-new-no-user" name="password-new" type="password" autocomplete="new-password">
      <label for="password-new-confirm-no-user">Confirm Password</label>
      <input id="password-new-confirm-no-user" name="password-new-confirm" type="password" autocomplete="new-password">
      <button type="submit">Change password</button>
    </fieldset>
  </form>
  <hr />
  <form action="/change-password" id="change-2">
    <h2>Change password (without current password)</h2>
    <fieldset>
      <label for="password-new-2">New Password</label>
      <input id="password-new-2" name="password-new-2" type="password" autocomplete="new-password">
      <label for="password-new-confirm-2">Confirm Password</label>
      <input id="password-new-confirm-2" name="password-new-confirm-2" type="password" autocomplete="new-password">
      <button type="submit">Change password</button>
    </fieldset>
  </form>
  <hr />
  <form action="/change-password" id="change-3">
    <h2>Change password (without autocomplete attributes)</h2>
    <fieldset>
      <label for="password-current-3">Current Password</label>
      <input id="password-current-3" name="password-current-3" type="password">
      <label for="password-new-3">New Password</label>
      <input id="password-new-3" name="password-new-3" type="password">
      <label for="password-new-confirm-3">Confirm Password</label>
      <input id="password-new-confirm-3" name="password-new-confirm-3" type="password">
      <button type="submit">Save changes</button>
    </fieldset>
  </form>
</div>
<script type="module">
  [...document.forms].forEach((form) => {
      form.addEventListener('submit', (e) => {
          e.preventDefault();
          const formData = new FormData(e.target);
          const dl = document.createElement('dl');
          formData.forEach((value, key) => {
              const dt = document.createElement('dt');
              const dd = document.createElement('dd');
              dt.innerText = key;
              dd.innerText = value;
              dl.append(dt, dd);
          });
          form.after(dl);
          form.remove();
      });
  });
</script>
</body>

</html>
