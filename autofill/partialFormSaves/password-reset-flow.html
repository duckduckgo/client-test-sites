<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Password Reset Flow</title>
    <link rel="stylesheet" href="../style.css" />
</head>
<body>
    <p><a href="../index.html#autofill">[Home]</a></p>

    <div class="dialog">
        <h2>Password Reset Flow</h2>
        <p>First enter your username</p>
        
        <form id="reset-form-step1" action="/reset-password">
            <div id="reset-step-1">
                <fieldset>
                    <label for="reset-username">Username</label>
                    <input id="reset-username" type="text" autocomplete="username" required>
                    <button type="button" onclick="showResetForm()">Send reset email</button>
                </fieldset>
            </div>
        </form>

        <!-- Separate form for new password -->
        <form id="reset-form-step2" action="/reset-password-complete" hidden>
            <div id="reset-step-2">
                <fieldset>
                    <label for="reset-new-password">New Password</label>
                    <input id="reset-new-password" type="password" autocomplete="new-password" required>
                    <button type="submit">Reset Password</button>
                </fieldset>
            </div>
        </form>
    </div>

    <script>
        function showResetForm() {
            if (document.getElementById('reset-username').checkValidity()) {
                document.getElementById('reset-form-step1').remove();
                document.getElementById('reset-form-step2').hidden = false;
            }
        }

        document.getElementById('reset-form-step2').addEventListener('submit', (e) => {
            e.preventDefault();
            if (e.target.checkValidity()) {
                e.target.innerHTML = '<h3>Password reset successfully!</h3>';
            }
        });
    </script>
</body>
</html> 
